<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Argo BV | Sean T. Howard</title> <meta name="author" content="Sean T. Howard"/> <meta name="description" content="monitoring ocean environments with floats and APIs"/> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"/> <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"/> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/github.css" media="none" id="highlight_theme_light"/> <link rel="shortcut icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸŒŒ</text></svg>"> <link rel="stylesheet" href="/assets/css/main.css"> <link rel="canonical" href="https://seanhoward.me/projects/argo_bv/"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/native.css" media="none" id="highlight_theme_dark"/> <script src="/assets/js/theme.js"></script> <script src="/assets/js/dark_mode.js"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="https://seanhoward.me/"><span class="font-weight-bold">Sean</span> T. Howard</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about</a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">blog</a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications</a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects</a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">Argo BV</h1> <p class="post-description">monitoring ocean environments with floats and APIs</p> </header> <article> <p><em>Making a Streamlit app which interacts with Argo data APIs to retrieve queried data and plot regional and temporal statistics.</em></p> <p>Try the app here! <a href="https://share.streamlit.io/st-howard/ArgoBV/main/ArgoBV.py" target="_blank" rel="noopener noreferrer"><img src="https://static.streamlit.io/badges/streamlit_badge_black_white.svg" alt="Streamlit App"></a></p> <h4 id="using-the-app">Using the App</h4> <ol> <li>Enter the Latitude and Longitude ranges on the left-hand panel. Click <strong>Update Region</strong> to draw data on map.</li> <li>Select the profile acquisition date range</li> <li>Select the depth range of data points to retrieve</li> <li>Select the <strong>Get Data!</strong> button to retrieve and process data from Argo servers</li> <li>Adjust the temporal ranges of data to plot, along with plotting options for BV profiles</li> </ol> <h2 id="argo-big-data-oceanography">Argo: Big Data Oceanography</h2> <p>Over the past twenty years, the Argo program has revolutionized oceanography by deploying thousands of robotic measuring devices known as `floatsâ€™ across the world. These floats spend most of their time submerged, drifting with the ocean currents. About once a week, a float will change its bouyancy and slowly ascend to surface. During the ascent, measurements of the local pressure, temperatue, salinity and other variables are taken. At the end of the ascent, the float breaches the ocean surface and transmits data to a satellite. Feeling accomplished, the float descends to a depth of around 1km and the process begins again.</p> <figure> <img src="/assets/img/argo_bv/float_cycle.png" width="90%"> <figcaption>The Argo float lifecycle. Image from <a href="https://argo.ucsd.edu/how-do-floats-work/" target="_blank" rel="noopener noreferrer">here</a>.</figcaption> </figure> <p>Each cycle produces a one dimensional slice of the ocean known as a profile. Over the course of the Argo program, there have been over two million profiles acquired. Every day, approximately 400 profiles are added to this number. The scale of this data, and the number of scientists who rely upon it, requires standardized means of storage and access. A benefit of this standardization is that data retrieval, processing, and analysis can be automated. This project is a prototype of how this workflow can be turned into an app for interactive data exploration. A lot of this process is already taken care of by the great python library <a href="https://argopy.readthedocs.io/en/latest/" target="_blank" rel="noopener noreferrer">argopy</a>, which is a python library which takes care of requesting and retrieving data from the appropriate server.</p> <h2 id="brunt-vÃ¤isÃ¤lÃ¤-frequency">Brunt-VÃ¤isÃ¤lÃ¤ frequency</h2> <p>I decided to calculate the <a href="https://en.wikipedia.org/wiki/Brunt%E2%80%93V%C3%A4is%C3%A4l%C3%A4_frequency" target="_blank" rel="noopener noreferrer">Brunt-VÃ¤isÃ¤lÃ¤ (BV) frequency</a> profile from the Argo data and allow the user to interactively see how the profile changes with region and time of year. But what is the BV frequency? In the ocean, density will vary with depth since water is both compressible and its contents (like salinity) and properties (like temperature) change. When ocean currents or an external force disturbs the density versus depth relationship, relatively dense water is shifted upwards and relatively light water is shifted downwards. Gravity then acts as a restoring force, pulling the denser water downwards and the lighter water upwards. The physics is similar to simple harmonic motion, where the density gradient is analogous to the spring constant. Just like harmonic motion, the frequency of oscillation can be determined from the strength of the restoring force. This frequency of oscillation is known as the Brunt-VÃ¤isÃ¤lÃ¤ (BV) frequency. It is a critical parameter in ocean circulation and is a proxy for the local stability of the water column. BV profiles in the ocean are dependent on a large number of parameters, many of which vary of the course of the year as the mixing from winds, heating from the sun, and local ocean currents change.</p> <h2 id="building-the-app">Building The App</h2> <p>To build the app, the first step is to understand the flow of data to the web app. First, profiles are collected with Argo floats and then transmitted to Iridium satellites. Then those satellites transfer the data to French ERDAP servers where the data is stored. The data is publicly available from these servers via a REST API. Argopy is a handy python library which handles the API syntax and data formatting, where a <code class="language-plaintext highlighter-rouge">DataFetcher</code> object returns the queried profiles as an xarray dataset. The profiles are then analyzed and plotted with the streamlit app. The streamlit app can also adjust the values of the argopy query, and therefore change what data is plotted on the web app.</p> <figure> <img src="/assets/img/argo_bv/data_pipeline.png" width="100%"> <figcaption>Data pipeline for accessing Argo data for Streamlit app.</figcaption> </figure> <p>The app is built using the <a href="https://docs.streamlit.io/" target="_blank" rel="noopener noreferrer">streamlit</a> python library, which allows you to build web apps for machine learning and data science. The main component of a streamlit web app is a python script which gets updated each time the user interacts with the web app. Streamlit has several useful functions for creating user interfaces, such as the box for the user to input a number or a slider to select a date range. Additionally, plots can be directly called within the python script and will be rendered in app. This allows for quick iteration and the ability to make web apps with little knowledge of web programming. An important feature of streamlit which is essential for creating the app is use of their <a href="https://docs.streamlit.io/library/api-reference/performance/st.cache" target="_blank" rel="noopener noreferrer">cache</a> and <a href="https://docs.streamlit.io/library/api-reference/session-state" target="_blank" rel="noopener noreferrer">session state</a>. These features allow information to shared between runs of the python script, which is necessary to keep track of user input and data retrieved with argopy.</p> </article> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> Â© Copyright 2023 Sean T. Howard. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="noopener noreferrer">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" target="_blank" rel="noopener noreferrer">al-folio</a> theme. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js" integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js"></script> <script defer src="/assets/js/common.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> </body> </html>